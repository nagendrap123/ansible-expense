- name: frontend server 
  hosts: frontend
  become: yes
  vars:

  tasks:
  - name: install the nginx server 
    ansible.builtin.package:
     name: nginx 
     state: installed
  - name: start and enable the nginx 
    ansible.builtin.service:
     name: nginx
     state: started 
     enabled: yes 
  - name: Find files and folders in /home/mydata/web/
    ansible.builtin.find:
     paths: "/usr/share/nginx/html/"
     recurse: yes  # To find items in subdirectories as well
    register: files_to_delete

  - name: Remove all files and folders found
    ansible.builtin.file:
     path: "{{ item.path }}"
     state: absent
    loop: "{{ files_to_delete.files + files_to_delete.dirs + files_to_delete.links }}"     
        

 

